<UserControl x:Class="CarRentalManagment.Views.MainView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="800">
    <Grid Background="{DynamicResource PageBackgroundBrush}">
        <ContentControl Content="{Binding CurrentSection}" />

        <Border x:Name="MenuPanel"
                Width="260"
                HorizontalAlignment="Right"
                Background="{DynamicResource MenuBackgroundBrush}"
                Padding="24"
                CornerRadius="24,0,0,24"
                RenderTransformOrigin="0.5,0.5"
                Panel.ZIndex="2">
            <Border.RenderTransform>
                <TranslateTransform X="260" />
            </Border.RenderTransform>
            <Border.Style>
                <Style TargetType="Border">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsMenuOpen}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                                         To="0"
                                                         Duration="0:0:0.3"
                                                         EasingFunction="{StaticResource MenuEase}" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                                         To="260"
                                                         Duration="0:0:0.3"
                                                         EasingFunction="{StaticResource MenuEase}" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
            <StackPanel>
                <StackPanel>
                    <TextBlock Text="Menu"
                               Foreground="{DynamicResource MenuForegroundBrush}"
                               FontSize="20"
                               FontWeight="SemiBold" />
                    <TextBlock Text="{Binding WelcomeMessage}"
                               Foreground="{DynamicResource TextSecondaryBrush}"
                               FontSize="12"
                               Margin="0,8,0,0" />
                </StackPanel>

                <Separator Background="{DynamicResource MenuSeparatorBrush}" Height="1" Margin="0,16,0,16" />

                <ItemsControl ItemsSource="{Binding MenuItems}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Command="{Binding Command}"
                                    Style="{StaticResource MenuButtonStyle}"
                                    Margin="0,6,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Icon}" FontSize="16" />
                                    <TextBlock Text="{Binding Title}"
                                               Foreground="{DynamicResource MenuForegroundBrush}"
                                               FontSize="14"
                                               Margin="12,0,0,0" />
                                </StackPanel>
                            </Button>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <Separator Background="{DynamicResource MenuSeparatorBrush}" Height="1" Margin="0,20,0,12" />

                <Button Content="Logout"
                        Command="{Binding LogoutCommand}"
                        Style="{StaticResource SecondaryButtonStyle}"
                        HorizontalAlignment="Stretch" />
            </StackPanel>
        </Border>

        <Button Content="â˜°"
                Width="48"
                Height="48"
                FontSize="20"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="0,16,16,0"
                Command="{Binding ToggleMenuCommand}"
                Style="{StaticResource FloatingActionButtonStyle}"
                Panel.ZIndex="3" />

        <Button Background="{DynamicResource OverlayBrush}"
                BorderThickness="0"
                Visibility="Collapsed"
                Command="{Binding ToggleMenuCommand}"
                Panel.ZIndex="1">
            <Button.Style>
                <Style TargetType="Button">
                    <Setter Property="Visibility" Value="Collapsed" />
                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                    <Setter Property="VerticalAlignment" Value="Stretch" />
                    <Setter Property="Opacity" Value="0" />
                    <Setter Property="Cursor" Value="Arrow" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" />
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsMenuOpen}" Value="True">
                            <Setter Property="Visibility" Value="Visible" />
                            <Setter Property="Opacity" Value="1" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>
    </Grid>
</UserControl>
